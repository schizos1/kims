{% extends "student/layout.html" %}

{% block title %}{{ concept.name }} 문제 풀기 - {{ super() }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <h1 class="mb-4">{{ concept.name }} 문제 풀기</h1>
  {% if questions %}
    <form method="POST" action="{{ url_for('student.quiz_submit', concept_id=concept.id) }}">
      {% for q in questions %}
        <div class="mb-5">
          <h5><strong>문제 {{ loop.index }}.</strong> {{ q.content }}</h5>
          {% if q.image_filename %}
            <img src="{{ url_for('static', filename='images/questions/' ~ q.image_filename) }}"
                 class="img-fluid mb-3" alt="문제 이미지">
          {% endif %}

          {% set options = [q.option1, q.option2, q.option3, q.option4] %}
          {% for opt in options %}
            <div class="form-check">
              <input class="form-check-input" type="radio" name="q{{ q.id }}" value="{{ loop.index }}"
                     id="q{{ q.id }}_{{ loop.index }}">
              <label class="form-check-label" for="q{{ q.id }}_{{ loop.index }}">
                {{ ['①', '②', '③', '④'][loop.index0] }} {{ opt }}
              </label>
            </div>
          {% endfor %}
        </div>
        <hr>
      {% endfor %}
      <div class="text-center">
        <button type="submit" class="btn btn-success btn-lg">제출하기</button>
      </div>
    </form>
  {% else %}
    <p class="text-muted">아직 등록된 문제가 없습니다.</p>
  {% endif %}
</div>
{% endblock %}
