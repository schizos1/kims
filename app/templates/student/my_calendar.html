{# templates/student/my_calendar.html #}
{% extends "student/layout.html" %}

{% block title %}나의 학습 캘린더{% endblock %}

{% block head_extra %}
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
<style>
  #calendar {
    max-width: 900px;
    margin: 0 auto;
  }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4"><i class="fas fa-calendar-alt me-2"></i>나의 학습 캘린더</h2>

  <div class="mb-4 p-3 bg-light rounded shadow-sm">
    <h5>오늘의 요약</h5>
    {% if today_total > 0 %}
      <p><strong>총 문제풀이:</strong> {{ today_total }}개 | <strong>정답률:</strong> {{ today_accuracy }}%</p>
    {% else %}
      <p>오늘은 아직 학습 기록이 없습니다.</p>
    {% endif %}
  </div>

  <div id="calendar"></div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const calendarEl = document.getElementById('calendar');
    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      locale: 'ko',
      height: 'auto',
      events: '/get-calendar-events',
      eventClick: function(info) {
        alert(info.event.title);
      },
      eventMouseEnter: function(info) {
        info.el.style.cursor = 'pointer';
      }
    });
    calendar.render();
  });
</script>
{% endblock %}
