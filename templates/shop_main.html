{% extends 'base.html' %}
{% load static %}

{% block title %}ìƒì {% endblock %}

{% block extra_head %}
{# ì´ í˜ì´ì§€ì—ë§Œ ì ìš©ë  CSS ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤. #}
{# ë‚˜ì¤‘ì—ëŠ” ì´ ìŠ¤íƒ€ì¼ë“¤ì„ ë³„ë„ì˜ .css íŒŒì¼ (ì˜ˆ: static/shop/css/shop_styles.css)ë¡œ ì˜®ê¸°ê³  ì—¬ê¸°ì„œ ë§í¬í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. #}
<style>
    .shop-page-container { /* í˜ì´ì§€ ì „ì²´ë¥¼ ê°ì‹¸ëŠ” div (ì„ íƒ ì‚¬í•­) */
        max-width: 900px;
        margin: 2em auto;
        padding: 1.5em;
        /* background: #fff; */ /* base.html ë°°ê²½ì„ ë”°ë¥´ê±°ë‚˜, í•„ìš”ì‹œ ì§€ì • */
        /* border-radius: 1.5em; */
        /* box-shadow: 0 5px 15px rgba(0,0,0,0.05); */
    }

    .shop-page-title { /* <h2>ìƒì </h2> ì œëª© */
        text-align: center;
        color: #4CAF50; /* ì˜ˆì‹œ: ìƒì  ëŠë‚Œì˜ ì´ˆë¡ìƒ‰ */
        margin-bottom: 1.5em;
        font-size: 2em;
        font-weight: bold;
    }

    .shop-list {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5em; /* ê°„ê²© */
        justify-content: center; /* ì•„ì´í…œ ì¤‘ì•™ ì •ë ¬ */
        margin-bottom: 2em;
    }

    .shop-item {
        width: 200px; /* ì•„ì´í…œ ë„ˆë¹„ */
        border-radius: 1em;
        background: #f8f9fa; /* ì•„ì´í…œ ë°°ê²½ìƒ‰ */
        box-shadow: 0 4px 8px rgba(0,0,0,0.08); /* ë¶€ë“œëŸ¬ìš´ ê·¸ë¦¼ì */
        padding: 1.5em;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: space-between; /* ë‚´ë¶€ ìš”ì†Œ ê°„ê²© ì¡°ì • */
        transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .shop-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.12);
    }

    .item-title {
        font-weight: 700;
        color: #337ab7; /* ì•„ì´í…œ ì œëª© ìƒ‰ìƒ */
        font-size: 1.1em;
        margin-bottom: 0.5em;
    }
    .item-price { /* ê°€ê²© í‘œì‹œë¥¼ ìœ„í•œ ìƒˆ í´ë˜ìŠ¤ (ì„ íƒ ì‚¬í•­) */
        color: #e67e22; /* í¬ì¸íŠ¸/ê°€ê²© ìƒ‰ìƒ */
        font-weight: bold;
        margin-bottom: 1em;
    }

    .buy-btn {
        margin-top: 0.7em;
        padding: 0.6em 1.5em; /* íŒ¨ë”© ì¡°ì ˆ */
        background: #5cb85c; /* êµ¬ë§¤ ë²„íŠ¼ ìƒ‰ìƒ */
        color: #fff;
        border-radius: 0.9em;
        border: none;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.2s;
        width: 100%; /* ë²„íŠ¼ ë„ˆë¹„ ì±„ì›€ */
    }
    .buy-btn:hover {
        background: #4cae4c; /* í˜¸ë²„ ì‹œ ì•½ê°„ ì–´ë‘¡ê²Œ */
    }

    .allowance-section { /* ìš©ëˆ ì‹ ì²­ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        margin-top: 2em;
        padding-top: 2em;
        border-top: 1px solid #eee;
        text-align: center;
    }
    .allowance-section .buy-btn { /* ìš©ëˆ ì‹ ì²­ ë²„íŠ¼ì€ ë„ˆë¹„ë¥¼ ìë™ìœ¼ë¡œ */
        width: auto; 
    }
</style>
{% endblock %}

{% block content %}
<div class="shop-page-container">
    <h2 class="shop-page-title">ğŸ›ï¸ ìƒì  ğŸ›ï¸</h2>

    {% if messages %} {# ë©”ì‹œì§€ í‘œì‹œ (êµ¬ë§¤ ê²°ê³¼ ë“±) #}
        {% for message in messages %}
            <div class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% else %}alert-info{% endif %}" role="alert" style="text-align:center; margin-bottom:1.5em;">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    {% if items %}
        <div class="shop-list">
            {% for item_obj in items %} {# ë³€ìˆ˜ëª…ì„ itemì—ì„œ item_objë¡œ ë³€ê²½ (í…œí”Œë¦¿ item íƒœê·¸ì™€ í˜¼ë™ ë°©ì§€) #}
            <div class="shop-item">
                <div> {# ë‚´ìš©ë¬¼ ìœ„ìª½ ì •ë ¬ì„ ìœ„í•œ ì¶”ê°€ div #}
                    <div class="item-title">{{ item_obj.name }}</div>
                    <div class="item-price">{{ item_obj.price }} í¬ì¸íŠ¸</div>
                    {# ì—¬ê¸°ì— ì•„ì´í…œ ì´ë¯¸ì§€ë‚˜ ìƒì„¸ ì„¤ëª… ë“±ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ #}
                    {# ì˜ˆ: <img src="{{ item_obj.image.url }}" alt="{{ item_obj.name }}" style="width:100px; height:100px; object-fit:cover; margin-bottom:10px;"> #}
                    {# <p style="font-size:0.85em; color:#777;">{{ item_obj.description }}</p> #}
                </div>
                {# âœ¨ ì¤‘ìš”: action URLì€ ì‹¤ì œ shop ì•±ì˜ urls.py ì„¤ì •ì— ë§ê²Œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. âœ¨ #}
                <form method="post" action="#" style="margin-top:auto;"> {# âœ¨ actionì„ "#" ìœ¼ë¡œ ë³€ê²½ âœ¨ #}
    {% csrf_token %}
    <button type="submit" class="buy-btn">êµ¬ë§¤í•˜ê¸°</button>
</form>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-center">íŒë§¤ ì¤‘ì¸ ì•„ì´í…œì´ ì•„ì§ ì—†ìŠµë‹ˆë‹¤. ê³§ ì¤€ë¹„ë  ì˜ˆì •ì…ë‹ˆë‹¤!</p>
    {% endif %}
    
    <div class="allowance-section">
        {# âœ¨ ì¤‘ìš”: action URLì€ ì‹¤ì œ shop ì•± ë˜ëŠ” users ì•±ì˜ urls.py ì„¤ì •ì— ë§ê²Œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. âœ¨ #}
        <form method="post" action="#"> {# âœ¨ actionì„ "#" ìœ¼ë¡œ ë³€ê²½ âœ¨ #}
    {% csrf_token %}
    <button type="submit" class="buy-btn">í¬ì¸íŠ¸ë¡œ ìš©ëˆ ì‹ ì²­í•˜ê¸° (ì¤€ë¹„ì¤‘)</button>
</form>
    </div>
</div>
{% endblock %}