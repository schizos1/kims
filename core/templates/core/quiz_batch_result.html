{% load core_extras %}
<h2>결과 확인</h2>

{% for r in results %}
  <div style="border:1px solid #ccc; padding:10px; margin:10px 0;">
    <p><strong>Q{{ forloop.counter }}. {{ r.question.question_text }}</strong></p>
    {% if r.question.image_url %}
      <img src="{{ r.question.image_url }}" style="max-width:300px;"><br>
    {% endif %}
    {% for i in "1234" %}
      <label {% if r.selected|stringformat:"s" == i %} style="font-weight:bold;" {% endif %}>
        ▶ {{ r.question|get_option:i }}
        {% if r.question.correct_answer|stringformat:"s" == i %} ✅ {% endif %}
      </label><br>
    {% endfor %}
    {% if r.is_correct %}
      <p style="color:green;">정답입니다! ✅</p>
    {% else %}
      <p style="color:red;">오답입니다 ❌</p>
    {% endif %}
  </div>
{% endfor %}

<a href="{% url 'quiz_batch' %}">다시 풀기</a>
