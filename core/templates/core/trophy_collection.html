{% extends "base.html" %}
{% load get_item %}
{% block content %}
<div class="container mt-5">
  <h2 class="text-center mb-4">ğŸ† íŠ¸ë¡œí”¼ ë³´ê´€í•¨</h2>
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">

    {% for trophy in all_trophies %}
      {% with user_trophy=user_trophies_by_id|get_item:trophy.id %}
      <div class="col">
        <div class="card h-100 text-center shadow-sm {% if not user_trophy %}opacity-50{% endif %}">
          <img src="{{ trophy.image_url }}" class="card-img-top mx-auto mt-3" style="width: 80px;" alt="Trophy Icon">
          <div class="card-body">
            <h5 class="card-title">{{ trophy.name }}</h5>
            <p class="card-text">{{ trophy.description }}</p>
            <p><strong>ğŸ¯ ëª©í‘œ:</strong> {{ trophy.goal_value }}</p>
            {% if trophy.trophy_type == "activity" %}
              <p>ğŸ“˜ ì´ í’€ì´ ìˆ˜: {{ user_log_count }}</p>
            {% elif trophy.trophy_type == "correct" %}
              <p>âœ… ì •ë‹µ ìˆ˜: {{ user_correct_count }}</p>
            {% elif trophy.trophy_type == "wrong" %}
              <p>ğŸ›  ì •ì •ëœ ì˜¤ë‹µ: {{ user_resolved_count }}</p>
            {% endif %}
            {% if not user_trophy %}
              <div class="progress mt-2" style="height: 10px;">
                <div class="progress-bar" role="progressbar"
                  style="width: {{ progress_percent|get_item:trophy.id }}%;"
                  aria-valuenow="{{ progress_percent|get_item:trophy.id }}" aria-valuemin="0" aria-valuemax="100">
                </div>
              </div>
              <small class="text-muted">{{ progress_percent|get_item:trophy.id }}% ë‹¬ì„±</small>
            {% else %}
              <p class="text-success mt-2">ğŸ… íšë“ ì™„ë£Œ!</p>
            {% endif %}
          </div>
        </div>
      </div>
      {% endwith %}
    {% endfor %}

  </div>
</div>
{% endblock %}
